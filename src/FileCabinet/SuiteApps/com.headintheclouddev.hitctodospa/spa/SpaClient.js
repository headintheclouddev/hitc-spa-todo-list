define(["exports","@uif-js/core/jsx-runtime","@uif-js/core","N/log","@uif-js/component"],(function(e,t,o,n,i){"use strict";function l(){return t.jsx(i.Heading,{type:i.Heading.Type.PAGE_TITLE,children:"Task List"})}const c={ADD_TODO:Symbol("addToDo"),FETCH_TODOS:Symbol("fetchToDo"),TOGGLE_TODO:Symbol("toggleToDo"),REMOVE_TODO:Symbol("removeToDo"),FILTER_TODO:Symbol("filterToDo")},s={addToDo:e=>({type:c.ADD_TODO,newId:"0",title:e}),fetchToDo:()=>({type:c.FETCH_TODOS,todos:[{title:"Create placeholder components",completed:!0,id:"1"},{title:"Implement state management",completed:!1,id:"2"}]}),toggleToDo:e=>({type:c.TOGGLE_TODO,id:e}),removeToDo:e=>({type:c.REMOVE_TODO,id:e}),filterToDos:e=>({type:c.FILTER_TODO,filter:e})};function r(e,t){return{todos:d(e.todos,t),filter:a(e.filter,t)}}function a(e,t){return t.type==c.FILTER_TODO?t.filter:e}function d(e,t){switch(t.type){case c.FETCH_TODOS:return t.todos;case c.ADD_TODO:return[{id:t.id,title:t.title,completed:!1},...e];case c.TOGGLE_TODO:return e.map((e=>e.id==t.id?{...e,completed:!e.completed}:e),[]);case c.REMOVE_TODO:return e.filter((e=>e.id!=t.id));default:return e}}function u(e){return t.jsxs("div",{style:{width:400,height:25},children:[t.jsx(i.CheckBox,{value:e.completed,label:e.title,action:function(e){"click"==e.reason&&console.log("handleToggle - now",e.value,"was",e.previousValue,"at",new Date)}}),t.jsx(i.Button,{icon:o.SystemIcon.DELETE,action:function(){console.log("TODO: Implement task deletion")}})]})}function T(){const e=o.useSelector((e=>e.filter)),n=o.useSelector((e=>e.todos)),i=o.useMemo((()=>{switch(console.log("TodoList - filteredTodos",e,n),e){case"active":return n.filter((e=>!e.completed));case"completed":return n.filter((e=>!0===e.completed));default:return n}}),[e,n]).map((e=>t.jsx(u,{...e})));return t.jsx("div",{children:i})}function f(){const[e,n]=o.useState(""),l=o.useDispatch();return t.jsx(o.VDom.Fragment,{children:t.jsxs("div",{width:"300px",children:[t.jsx(i.TextBox,{type:i.TextBox.Type.TEXT,placeholder:"Enter new task...",onTextChanged:function(e){n(e.text)},text:e}),t.jsx(i.Button,{label:"Add",action:function(){e&&(l(s.addToDo(e)),n(""))}})]})})}function m(e){const n=o.useDispatch();const i={color:"blue",cursor:"pointer",fontWeight:o.useSelector((e=>e.filter))==e.name?"bold":"normal"};return t.jsx("span",{style:i,onClick:function(){console.log("handleFilter",e.name),n(s.filterToDos(e.name))},children:e.name})}function p(){return t.jsxs("div",{children:[t.jsx("span",{children:"Filter: "}),t.jsx(m,{name:"all"})," / ",t.jsx(m,{name:"active"})," / ",t.jsx(m,{name:"completed"})]})}const D={todos:[],filter:"all"};function O(){n.debug("App",`Initializing at ${new Date}`);const[e,c]=o.useState(D),a=o.useMemo((()=>o.Store.create({reducer:r,state:e,onStateChanged:({currentState:e})=>c(e)})));return o.useEffect((()=>a.subscribe((()=>c(a.getState())))),[]),o.useEffect((()=>{console.log("useEffect - fetchToDo",new Date),a.dispatch(s.fetchToDo())}),[]),t.jsx(o.Store.Provider,{store:a,children:t.jsxs(i.StackPanel,{alignment:i.StackPanel.Alignment.START,orientation:i.StackPanel.Orientation.VERTICAL,children:[t.jsx(i.StackPanel.Item,{children:t.jsx(l,{})}),t.jsx(i.StackPanel.Item,{children:t.jsx(f,{})}),t.jsx(i.StackPanel.Item,{children:t.jsx(T,{})}),t.jsx(i.StackPanel.Item,{children:t.jsx(p,{})})]})})}e.run=function(e){console.log("SpaClient version 250320a - run",e),e.setLayout("application"),e.setContent(t.jsx(O,{}))}}));
